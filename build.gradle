plugins {
    id 'java-library'
}

sourceSets.main {
    java.srcDirs = ['src/']
    resources.srcDirs = ['assets/']
}

repositories {
    maven { url 'https://www.jitpack.io' }
}

dependencies {
    api "com.github.Anuken.Arc:arc-core:$arcVersion"
    implementation "com.github.Anuken.Arc:backend-sdl:$arcVersion"
    implementation "com.github.Anuken.Arc:freetype:$arcVersion"
    implementation "com.github.Anuken.Arc:natives-desktop:$arcVersion"
    implementation "com.github.Anuken.Arc:natives-freetype-desktop:$arcVersion"
}

def entry = 'omnihilux.Omnihilux'

jar {
    archiveFileName = 'Omnihilux.jar'
    manifest.attributes('Main-Class': entry)

    from configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
}

tasks.register('run', JavaExec) {
    dependsOn configurations.runtimeClasspath

    mainClass = entry
    classpath = sourceSets.main.runtimeClasspath
    standardInput = System.in
}
